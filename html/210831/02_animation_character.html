<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>

    <script>
        // 0이상 limit미만의 랜덤한 숫자를 뽑아내는 함수
        function nextRandomInterger(limit)
        {
            // round 반올림
            return Math.round(Math.random()*limit)
        }
        // 랜덤한 알파벳을 리턴
        let randomAlphabet = (
            function()
            {
                let alphabet = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'
                return function()
                {
                    return alphabet.charAt(nextRandomInterger(25));
                }
            }
        )();
        // 속도 관련된 함수
        function randomSpeed(maxSpeed)
        {
            return Math.random()*maxSpeed - Math.random()*maxSpeed
        }
    </script>

    <script>
        // 글자들이 움직일 영역
        let canvasWidth = 700
        let canvasHeight = 400

        function MovingText()
        {
            this.x = nextRandomInterger(canvasWidth)    // 0부터 700까지의 값 리턴
            this.y = nextRandomInterger(canvasHeight)   // 0부터 400까지의 값 리턴
            this.vx = randomSpeed(10)   // 속도조절 0부터 10까지의 속도
            this.vy = randomSpeed(10)   // 속도조절 0부터 10까지의 속도

            this.body = document.createElement('h1')
            this.body.innerHTML = randomAlphabet()
            this.body.style.position = 'absolute'

            // let a = nextRandomInterger(255)
            // let b = nextRandomInterger(255)
            // let c = nextRandomInterger(255)
            // this.body.style.color = `rgb($[a],$[b],$[c])`
            
            document.body.appendChild(this.body)
        }

        // Prototype(함수를 바깥으로 뺌)
        MovingText.prototype.move = function()
        {
            if(this.x<0 || this.x>canvasWidth){this.vx *=-1;}
            if(this.y<0 || this.y>canvasHeight){this.vy *= -1;}

            this.x+=this.vx
            this.y+=this.vy
            
            this.body.style.left = this.x+'px'
            this.body.style.top = this.y+'px'

            let value = nextRandomInterger(2);
            if(value==0)
            {
                this.body.style.color='red'
            }
            else if(value==1)
            {
                this.body.style.color='blue'
            }
            else
            {
                this.body.style.color='yellow'
            }
        }
    </script>

    <script>
        window.onload = function()
        {
            let movingTexts=[]
            for(let i=0; i<100; i++){
                movingTexts.push(new MovingText())
            }

            setInterval(function()
            {
                for(var i in movingTexts)
                {
                    movingTexts[i].move()
                }
            }
            ,1000/30)
        }
    </script>
</head>
<body>
    
</body>
</html>